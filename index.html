<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>artisanlichfield.com: The Curated Directory for Local Food & Drink Producers</title>
    <meta name="description" content="Find the best local artisan food and drink producers in Lichfield. From farm shops and bakeries to breweries and butchers, we are building a curated directory to support local creators. Get notified when we launch!">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîç</text></svg>">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .bg-gradient-blue {
            background: linear-gradient(to bottom, #f1f5f9, #cbd5e1);
        }
        .form-transition {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 text-slate-800">

    <main class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-24 flex items-center justify-center min-h-screen bg-gradient-blue">
        <div class="max-w-4xl mx-auto text-center">
            <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-slate-900 mb-6">
                artisanlichfield.<span class="text-indigo-600">com</span>
            </h1>
            <h2 class="text-2xl md:text-3xl font-medium text-slate-700 mb-8">
                The Curated Directory for Local Artisan Food & Drink Producers in Lichfield
            </h2>
            <p class="max-w-2xl mx-auto text-lg text-slate-600 mb-10">
                We're building a definitive online directory for Lichfield's finest local producers. Whether you're looking for a farm shop near you, a local brewery, or a family-run bakery, we'll make it easy to find and support the very best of our community.
            </p>
            
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl max-w-xl mx-auto">
                
                <div class="mb-4 flex space-x-4">
                    <button type="button" id="foodie-btn" class="flex-1 py-3 px-4 border border-slate-300 rounded-md text-sm font-medium text-white bg-indigo-600 transition-colors">
                        I'm a Curious Foodie
                    </button>
                    <button type="button" id="producer-btn" class="flex-1 py-3 px-4 border border-slate-300 rounded-md text-sm font-medium text-slate-700 bg-slate-100 transition-colors">
                        I'm a Local Producer
                    </button>
                </div>

                <div id="forms-container" class="relative overflow-hidden">
                    <!-- Foodie Signup Form (Default) -->
                    <form id="foodie-form" class="form-transition space-y-4">
                        <p class="text-sm text-slate-500 text-center">Join our mailing list to be the first to know when we launch!</p>
                        <div>
                            <input
                                type="text"
                                id="foodie-firstName"
                                name="firstName"
                                required
                                placeholder="First Name"
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 bg-slate-100"
                            />
                        </div>
                        <div>
                            <input
                                type="text"
                                id="foodie-lastName"
                                name="lastName"
                                required
                                placeholder="Last Name"
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 bg-slate-100"
                            />
                        </div>
                        <div>
                            <input
                                type="email"
                                id="foodie-email"
                                name="email"
                                required
                                placeholder="Email Address"
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 bg-slate-100"
                            />
                        </div>
                        <button
                            type="submit"
                            class="w-full inline-flex justify-center py-3 px-4 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-300"
                        >
                            Notify Me
                        </button>
                    </form>

                    <!-- Producer Submission Form -->
                    <form id="producer-form" class="form-transition space-y-4 absolute inset-0 opacity-0 pointer-events-none">
                        <p class="text-sm text-slate-500 text-center">Tell us about your business! We'll review your submission for our curated directory.</p>
                        <div>
                            <input
                                type="text"
                                id="producer-name"
                                name="name"
                                required
                                placeholder="Producer Name"
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 bg-slate-100"
                            />
                        </div>
                         <div>
                            <input
                                type="text"
                                id="producer-contact"
                                name="contact"
                                required
                                placeholder="Website or Social Media Link"
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 bg-slate-100"
                            />
                        </div>
                        <div>
                            <textarea
                                id="producer-description"
                                name="description"
                                required
                                placeholder="Brief description of your business and products"
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-3 bg-slate-100"
                                rows="3"
                            ></textarea>
                        </div>
                        <div class="space-y-2 text-left">
                            <label class="block text-sm font-medium text-slate-700">Product Categories:</label>
                            <div id="category-checkboxes" class="flex flex-wrap gap-2">
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" name="categories" value="Bakery" class="rounded text-indigo-600 focus:ring-indigo-500 mr-1" />
                                    Bakery
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" name="categories" value="Butcher" class="rounded text-indigo-600 focus:ring-indigo-500 mr-1" />
                                    Butcher
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" name="categories" value="Farm Shop" class="rounded text-indigo-600 focus:ring-indigo-500 mr-1" />
                                    Farm Shop
                                </label>
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" name="categories" value="Brewery" class="rounded text-indigo-600 focus:ring-indigo-500 mr-1" />
                                    Brewery
                                </label>
                                 <label class="flex items-center text-sm">
                                    <input type="checkbox" name="categories" value="Dairy" class="rounded text-indigo-600 focus:ring-indigo-500 mr-1" />
                                    Dairy
                                </label>
                                 <label class="flex items-center text-sm">
                                    <input type="checkbox" name="categories" value="Jams/Preserves" class="rounded text-indigo-600 focus:ring-indigo-500 mr-1" />
                                    Jams/Preserves
                                </label>
                            </div>
                        </div>
                        <button
                            type="submit"
                            class="w-full inline-flex justify-center py-3 px-4 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-300"
                        >
                            Submit for Review
                        </button>
                    </form>
                </div>
                
                <p id="success-message" class="text-green-600 font-medium hidden mt-4">Thank you! We have received your submission and will be in touch when we launch.</p>
                <p id="producer-success-message" class="text-green-600 font-medium hidden mt-4">Thank you! Your producer listing has been submitted for review.</p>
            </div>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyAeMIl8q4WKI17pMzM5zMmxkg9Cn7j2JPg",
          authDomain: "artisanlichfield.firebaseapp.com",
          projectId: "artisanlichfield",
          storageBucket: "artisanlichfield.firebasestorage.app",
          messagingSenderId: "476958782386",
          appId: "1:476958782386:web:41407ea6259b2a2377aaab",
          measurementId: "G-H4LMS97GWD"
        };
        const appId = firebaseConfig.appId;

        document.addEventListener('DOMContentLoaded', async () => {
            const foodieBtn = document.getElementById('foodie-btn');
            const producerBtn = document.getElementById('producer-btn');
            const foodieForm = document.getElementById('foodie-form');
            const producerForm = document.getElementById('producer-form');
            const formsContainer = document.getElementById('forms-container');

            const successMessage = document.getElementById('success-message');
            const producerSuccessMessage = document.getElementById('producer-success-message');

            if (!firebaseConfig || !firebaseConfig.projectId) {
                console.error("Firebase config is missing or invalid. Data will not be saved.");
                return;
            }

            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);

            try {
                await signInAnonymously(auth);
            } catch (error) {
                console.error("Anonymous sign-in failed:", error);
                return;
            }

            const showForm = (formToShow, buttonToSelect, buttonToDeselect) => {
                successMessage.classList.add('hidden');
                producerSuccessMessage.classList.add('hidden');

                formsContainer.style.height = `${formToShow.scrollHeight}px`;
                formsContainer.querySelectorAll('form').forEach(form => {
                    form.classList.add('opacity-0', 'pointer-events-none');
                    form.classList.remove('opacity-100', 'pointer-events-auto');
                });

                formToShow.classList.remove('opacity-0', 'pointer-events-none');
                formToShow.classList.add('opacity-100', 'pointer-events-auto');

                buttonToSelect.classList.remove('bg-slate-100', 'text-slate-700');
                buttonToSelect.classList.add('bg-indigo-600', 'text-white');
                buttonToDeselect.classList.remove('bg-indigo-600', 'text-white');
                buttonToDeselect.classList.add('bg-slate-100', 'text-slate-700');
            };

            foodieBtn.addEventListener('click', () => {
                showForm(foodieForm, foodieBtn, producerBtn);
            });

            producerBtn.addEventListener('click', () => {
                showForm(producerForm, producerBtn, foodieBtn);
            });

            // Initial form display
            showForm(foodieForm, foodieBtn, producerBtn);

            foodieForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                const firstName = document.getElementById('foodie-firstName').value;
                const lastName = document.getElementById('foodie-lastName').value;
                const email = document.getElementById('foodie-email').value;

                try {
                    const notifyCollection = collection(db, `/artifacts/${appId}/public/data/pre-launch-signups`);
                    await addDoc(notifyCollection, {
                        firstName: firstName,
                        lastName: lastName,
                        email: email,
                        userType: 'Curious Foodie',
                        timestamp: serverTimestamp()
                    });

                    foodieForm.reset();
                    successMessage.classList.remove('hidden');
                } catch (error) {
                    console.error("Error adding document:", error);
                    alert("Failed to submit. Please try again.");
                }
            });

            producerForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                const name = document.getElementById('producer-name').value;
                const contact = document.getElementById('producer-contact').value;
                const description = document.getElementById('producer-description').value;
                const categories = Array.from(document.querySelectorAll('#category-checkboxes input:checked')).map(cb => cb.value);

                try {
                    const pendingProducersCollection = collection(db, `/artifacts/${appId}/public/data/pending-producers`);
                    await addDoc(pendingProducersCollection, {
                        name: name,
                        contactInfo: contact,
                        description: description,
                        categories: categories,
                        isApproved: false,
                        timestamp: serverTimestamp()
                    });

                    producerForm.reset();
                    producerSuccessMessage.classList.remove('hidden');
                } catch (error) {
                    console.error("Error adding document:", error);
                    alert("Failed to submit. Please try again.");
                }
            });
        });
    </script>
</body>
</html>
